<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
  <th:block th:replace="~{fragments/layout :: layout(~{::content})}">
    <th:block th:fragment="content">
      <div class="d-flex flex-column flex-lg-row align-items-lg-center justify-content-between mb-3 gap-3">
        <div>
          <h4 class="mb-0">Catálogos auxiliares</h4>
          <p class="text-muted mb-0">Cadastre e importe compradores, fornecedores e segmentos usados no agendamento de visitas.</p>
        </div>
        <a class="btn btn-outline-success btn-sm" href="/admin/visitas">Voltar para agenda</a>
      </div>

      <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>
      <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>
      <div th:if="${warningMessages}" class="alert alert-warning">
        <p class="mb-1 fw-semibold">Importação concluída com avisos:</p>
        <ul class="mb-0 ps-3">
          <li th:each="msg : ${warningMessages}" th:text="${msg}"></li>
        </ul>
      </div>

      <div class="row g-4">
        <div class="col-12 col-lg-4">
          <div class="card shadow-sm h-100">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">Compradores</h5>
              <form th:action="@{/admin/catalogos/compradores}" method="post" class="row g-2 mb-3">
                <div class="col-12">
                  <label class="form-label" for="novoComprador">Nome</label>
                  <input id="novoComprador" class="form-control" name="name" placeholder="Nome do comprador" required>
                </div>
                <div class="col-12">
                  <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                  <button class="btn btn-success w-100" type="submit">Salvar</button>
                </div>
              </form>

              <div class="mb-3">
                <h6 class="fw-semibold">Importar planilha</h6>
                <p class="text-muted small">O arquivo deve conter uma coluna "Nome".</p>
                <div class="d-flex flex-column gap-2 mb-2">
                  <a class="btn btn-outline-secondary btn-sm" href="/modelos/compradores.csv" download>Modelo CSV</a>
                </div>
                <form th:action="@{/admin/catalogos/compradores/importar}" method="post" enctype="multipart/form-data" class="d-flex gap-2">
                  <input class="form-control" type="file" name="file" accept=".csv,.txt" required>
                  <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                  <button class="btn btn-outline-success" type="submit">Importar</button>
                </form>
              </div>

              <div class="table-responsive small mt-auto">
                <table class="table table-sm align-middle mb-0">
                  <thead>
                    <tr>
                      <th>Nome</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr th:each="buyer : ${buyers}">
                      <td th:text="${buyer.name}">Comprador</td>
                      <td>
                        <form th:action="@{'/admin/catalogos/compradores/' + ${buyer.id} + '/status'}" method="post">
                          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                          <button class="btn btn-sm" type="submit" th:classappend="${buyer.active} ? ' btn-outline-success' : ' btn-outline-secondary'" th:text="${buyer.active} ? 'Ativo' : 'Inativo'"></button>
                        </form>
                      </td>
                    </tr>
                    <tr th:if="${#lists.isEmpty(buyers)}">
                      <td colspan="2" class="text-center text-muted py-3">Nenhum comprador cadastrado.</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 col-lg-4">
          <div class="card shadow-sm h-100">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">Fornecedores</h5>
              <form th:action="@{/admin/catalogos/fornecedores}" method="post" class="row g-2 mb-3">
                <div class="col-12">
                  <label class="form-label" for="novoFornecedor">Nome</label>
                  <input id="novoFornecedor" class="form-control" name="name" placeholder="Nome do fornecedor" required>
                </div>
                <div class="col-12">
                  <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                  <button class="btn btn-success w-100" type="submit">Salvar</button>
                </div>
              </form>

              <div class="mb-3">
                <h6 class="fw-semibold">Importar planilha</h6>
                <p class="text-muted small">O arquivo deve conter uma coluna "Nome".</p>
                <div class="d-flex flex-column gap-2 mb-2">
                  <a class="btn btn-outline-secondary btn-sm" href="/modelos/fornecedores.csv" download>Modelo CSV</a>
                </div>
                <form th:action="@{/admin/catalogos/fornecedores/importar}" method="post" enctype="multipart/form-data" class="d-flex gap-2">
                  <input class="form-control" type="file" name="file" accept=".csv,.txt" required>
                  <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                  <button class="btn btn-outline-success" type="submit">Importar</button>
                </form>
              </div>

              <div class="table-responsive small mt-auto">
                <table class="table table-sm align-middle mb-0">
                  <thead>
                    <tr>
                      <th>Nome</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr th:each="supplier : ${suppliers}">
                      <td th:text="${supplier.name}">Fornecedor</td>
                      <td>
                        <form th:action="@{'/admin/catalogos/fornecedores/' + ${supplier.id} + '/status'}" method="post">
                          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                          <button class="btn btn-sm" type="submit" th:classappend="${supplier.active} ? ' btn-outline-success' : ' btn-outline-secondary'" th:text="${supplier.active} ? 'Ativo' : 'Inativo'"></button>
                        </form>
                      </td>
                    </tr>
                    <tr th:if="${#lists.isEmpty(suppliers)}">
                      <td colspan="2" class="text-center text-muted py-3">Nenhum fornecedor cadastrado.</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 col-lg-4">
          <div class="card shadow-sm h-100">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">Segmentos</h5>
              <form th:action="@{/admin/catalogos/segmentos}" method="post" class="row g-2 mb-3">
                <div class="col-12">
                  <label class="form-label" for="novoSegmento">Nome</label>
                  <input id="novoSegmento" class="form-control" name="name" placeholder="Ex.: Horti, Granjeiro" required>
                </div>
                <div class="col-12">
                  <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                  <button class="btn btn-success w-100" type="submit">Salvar</button>
                </div>
              </form>

              <div class="mb-3">
                <h6 class="fw-semibold">Importar planilha</h6>
                <p class="text-muted small">O arquivo deve conter uma coluna "Nome".</p>
                <div class="d-flex flex-column gap-2 mb-2">
                  <a class="btn btn-outline-secondary btn-sm" href="/modelos/segmentos.csv" download>Modelo CSV</a>
                </div>
                <form th:action="@{/admin/catalogos/segmentos/importar}" method="post" enctype="multipart/form-data" class="d-flex gap-2">
                  <input class="form-control" type="file" name="file" accept=".csv,.txt" required>
                  <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                  <button class="btn btn-outline-success" type="submit">Importar</button>
                </form>
              </div>

              <div class="table-responsive small mt-auto">
                <table class="table table-sm align-middle mb-0">
                  <thead>
                    <tr>
                      <th>Nome</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr th:each="segment : ${segments}">
                      <td th:text="${segment.name}">Segmento</td>
                      <td>
                        <form th:action="@{'/admin/catalogos/segmentos/' + ${segment.id} + '/status'}" method="post">
                          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                          <button class="btn btn-sm" type="submit" th:classappend="${segment.active} ? ' btn-outline-success' : ' btn-outline-secondary'" th:text="${segment.active} ? 'Ativo' : 'Inativo'"></button>
                        </form>
                      </td>
                    </tr>
                    <tr th:if="${#lists.isEmpty(segments)}">
                      <td colspan="2" class="text-center text-muted py-3">Nenhum segmento cadastrado.</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </th:block>
  </th:block>
</html>
src/main/resources/templates/admin/stores.html
Novo
